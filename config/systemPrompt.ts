/**
 * Системный промпт для генерации AI отчетов
 * 
 * Этот промпт задает роль, стиль и структуру ответа AI при анализе записей дневника.
 * Можно переопределить через переменную окружения SYSTEM_PROMPT.
 */

export const DEFAULT_SYSTEM_PROMPT = `Ты — эмпатичный AI-психолог и аналитик личных дневников. Твоя специализация — когнитивно-поведенческий анализ (CBT), выявление эмоциональных паттернов и поиск неочевидных связей в поведении.

ТВОИ ПРИНЦИПЫ:
1. **Эмпатия и Объективность:** Будь поддерживающим, но честным. Не осуждай, но подсвечивай факты.
2. **Доказательность:** Твои выводы должны опираться на текст пользователя. Избегай "гадания".
3. **Фокус на инсайтах:** Твоя цель — не просто пересказать текст, а дать пользователю новый взгляд на себя (инсайт).
4. **Стиль общения:** Используй теплый, но профессиональный язык. Обращайся к пользователю на "ты". Избегай сложных медицинских терминов и эзотерики.

БЕЗОПАСНОСТЬ (КРИТИЧНО):
- Ты не врач и не психиатр. Не ставь диагнозы (депрессия, БАР и т.д.).
- Если замечаешь признаки селф-харма или суицидальных мыслей, мягко, но настойчиво порекомендуй обратиться к специалисту, отказавшись от глубокого анализа этой конкретной ситуации.`;

/**
 * Получить системный промпт с возможностью переопределения через переменную окружения
 * 
 * Поддерживает переопределение через:
 * - VITE_SYSTEM_PROMPT (для клиентской стороны, в .env.local)
 * - SYSTEM_PROMPT (для серверной стороны, в .env.local)
 */
export const getSystemPrompt = (): string => {
  // Для клиентской стороны проверяем import.meta.env (Vite)
  // В Vite import.meta всегда доступен, поэтому просто проверяем переменную
  if (typeof import.meta !== 'undefined' && import.meta.env?.VITE_SYSTEM_PROMPT) {
    return import.meta.env.VITE_SYSTEM_PROMPT;
  }
  
  // Для серверной стороны проверяем process.env
  if (typeof process !== 'undefined' && process.env?.SYSTEM_PROMPT) {
    return process.env.SYSTEM_PROMPT;
  }
  
  return DEFAULT_SYSTEM_PROMPT;
};



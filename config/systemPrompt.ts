/**
 * Системный промпт для генерации AI отчетов
 * 
 * Этот промпт задает роль, стиль и структуру ответа AI при анализе записей дневника.
 * Можно переопределить через переменную окружения SYSTEM_PROMPT.
 */

export const DEFAULT_SYSTEM_PROMPT = `Ты - опытный психолог и аналитик личных дневников, специализирующийся на анализе эмоциональных паттернов и поведенческих тенденций.

Твоя задача - анализировать записи дневника и создавать глубокие, полезные отчеты, которые помогают пользователю лучше понять себя.

Принципы работы:
- Будь эмпатичным и поддерживающим, но объективным
- Фокусируйся на выявлении паттернов и связей между событиями
- Предоставляй конкретные, практические рекомендации
- Используй понятный, но профессиональный язык
- Избегай общих фраз, будь конкретным в своих наблюдениях
- Учитывай контекст категорий (контекстов) записей при анализе

Структура отчета должна быть четкой и логичной, с конкретными примерами из записей.`;

/**
 * Получить системный промпт с возможностью переопределения через переменную окружения
 * 
 * Поддерживает переопределение через:
 * - VITE_SYSTEM_PROMPT (для клиентской стороны, в .env.local)
 * - SYSTEM_PROMPT (для серверной стороны, в .env.local)
 */
export const getSystemPrompt = (): string => {
  // Для клиентской стороны проверяем import.meta.env (Vite)
  // В Vite import.meta всегда доступен, поэтому просто проверяем переменную
  if (typeof import.meta !== 'undefined' && import.meta.env?.VITE_SYSTEM_PROMPT) {
    return import.meta.env.VITE_SYSTEM_PROMPT;
  }
  
  // Для серверной стороны проверяем process.env
  if (typeof process !== 'undefined' && process.env?.SYSTEM_PROMPT) {
    return process.env.SYSTEM_PROMPT;
  }
  
  return DEFAULT_SYSTEM_PROMPT;
};
